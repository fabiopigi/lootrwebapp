$(function(){$.loadLoot=function(o,t,e){$.getLoots(o,t,e,function(o){$.each(o.loots,function(o,t){void 0===loots[t.id]&&(loots[t.id]=t,console.log("New Loot with ID: "+t.id+" loaded."),$.addLootPin(t))})},function(){alert("Oops, something went terribly wrong. Have a coffee while we fix our code.")})}
var o=new google.maps.MarkerImage("img/MapsMarker@2x.png",null,null,null,new google.maps.Size(21,30))
$.addLootPin=function(t){console.log(t)
var e,i,n
e=new google.maps.Marker({position:new google.maps.LatLng(t.coordinate.latitude,t.coordinate.longitude),map:map,title:t.title,icon:o}),i=new google.maps.InfoWindow({content:'<div style="font-weight:bold">'+t.title+"</div> <div>"+t.summary+"</div>"}),n=5e3,google.maps.event.addListener(e,"click",function(){i.open(map,e),setTimeout(function(){i.close(map,e)},n)})},$.loadStatistics=function(o){$.getStatistics(o,function(o){$.fillStatisticsCard("topcontents","Top Loots (by contents)",o.toplists.topcontents),$.fillStatisticsCard("topviews","Top Loots (by visits)",o.toplists.topviews),$.fillStatisticsCard("topcities","Top Cities (by loots)",o.toplists.topcities)},function(){alert("Oops, something went terribly wrong. Have a coffee while we fix our code.")})},$.fillStatisticsCard=function(o,t,e){var i
i=$("<div/>").addClass("list-group"),$("<li/>").addClass("list-group-item list-group-item-info").html("<strong>{0}</strong>".f(t)).appendTo(i),$.each(e,function(o,t){var e,n
e=new google.maps.LatLng(t.latitude,t.longitude),$("<a/>").addClass("list-group-item").attr("href","#map").html('{0}<span class="badge">{1}</span>'.f(t.title,t.counter)).click(function(o){map.panTo(e),n=Math.floor(google.maps.geometry.spherical.computeDistanceBetween(map.getBounds().getNorthEast(),map.getCenter())),$.loadLoot(t.latitude,t.longitude,n)}).appendTo(i)}),i.appendTo("."+o)},$.smoothScroll=function(o){var t=o.hash,e=300
$("html, body").animate({scrollTop:$(o.hash).offset().top},e,function(){window.location.hash=t})}})
